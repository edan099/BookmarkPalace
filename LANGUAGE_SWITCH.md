# 🌐 多语言切换功能说明

## 📋 功能特性

### ✅ 默认语言：**中文**
- 插件首次启动时显示中文界面
- 工具窗口标题：`龙龙书签`
- 菜单项：`龙龙书签`、`添加书签`、`快速添加书签` 等

### 🔄 切换到英文
点击语言切换按钮后：
- 工具窗口内容切换为英文
- 菜单项切换为英文（鼠标悬停时更新）
- 对话框标题和按钮切换为英文
- 导览图编辑器切换为英文

### 💾 自动保存
- 语言设置自动持久化到 IDE 配置
- 重启 IDE 后保持您的语言选择
- 存储位置：IDE PropertiesComponent

## 🎯 切换位置

### 1. 书签工具窗口
- 打开左侧"龙龙书签"工具窗口
- 点击工具栏最右侧的语言切换按钮
- 按钮文本会动态变化：
  - 中文模式显示：`English`（点击切换到英文）
  - 英文模式显示：`中文`（点击切换到中文）

### 2. 导览图编辑器
- 打开任意导览图
- 点击右上角的语言切换按钮
- 立即生效，界面刷新

## 🔧 技术实现

### 核心组件
- **Messages 对象** - 全局语言管理器
  - `toggleLanguage()` - 切换语言
  - `isEnglish()` - 检查当前语言
  - 支持持久化存储

### 动态文本
所有 Action 的 `update()` 方法会根据 `Messages` 动态设置文本：

```kotlin
override fun update(e: AnActionEvent) {
    e.presentation.text = Messages.addBookmark  // 根据语言返回"添加书签"或"Add Bookmark"
}
```

### 支持切换的元素
✅ 菜单项文本（Tools > 龙龙书签）
✅ Action 文本（右键菜单、工具栏）
✅ 对话框标题
✅ 按钮文本
✅ 工具窗口内容
✅ 导览图界面
✅ 属性面板
✅ 搜索提示文本

### 不支持动态切换的元素
❌ 工具窗口标题（IDE 限制，固定为"龙龙书签"）
❌ plugin.xml 中的描述文本（安装时显示）

## 📊 语言对照表

| 功能 | 中文 | English |
|------|------|---------|
| 工具窗口 | 龙龙书签 | 龙龙书签 (固定) |
| 添加书签 | 添加书签 | Add Bookmark |
| 快速添加 | 快速添加 | Quick Add |
| 显示列表 | 书签列表 | Bookmarks |
| 打开导览图 | 打开导览图 | Open Diagram |
| 导出 | 导出 | Export |
| 导入 | 导入 | Import |
| 节点 | 节点 | Node |
| 连线 | 连线 | Connection |
| 属性 | 属性 | Properties |
| 搜索 | 搜索 | Search |

## 🚀 使用示例

### 示例 1：首次使用（默认中文）
```
1. 安装插件
2. 打开 IDE
3. 看到"龙龙书签"工具窗口（中文）
4. 菜单 Tools > 龙龙书签（中文）
```

### 示例 2：切换到英文
```
1. 打开"龙龙书签"工具窗口
2. 点击工具栏右侧的"English"按钮
3. 界面立即切换为英文
4. 菜单项在鼠标悬停时显示英文
```

### 示例 3：重启后保持英文
```
1. 切换到英文模式
2. 关闭 IDE
3. 重新打开 IDE
4. 自动显示英文界面（保持上次设置）
```

## 💡 提示

1. **首次切换可能需要鼠标悬停** - 菜单项的文本会在鼠标悬停时更新
2. **立即生效** - 对话框和工具窗口内容会立即切换
3. **持久保存** - 语言设置会自动保存，无需手动操作
4. **全局切换** - 一次切换，整个插件的所有界面都会同步更新

## 🐛 已知限制

1. 工具窗口标题始终显示"龙龙书签"（IDE API 限制）
2. plugin.xml 中的描述始终显示安装时的语言
3. 某些系统通知可能仍显示中文（需逐步完善）

## ✅ 已完成的动态切换

### 工具窗口（BookmarkToolWindowPanel）
- ✅ 搜索框占位符："搜索书签..." ↔ "Search bookmarks..."
- ✅ 分组标签："分组:" ↔ "Group:"
- ✅ 分组下拉选项：
  - "按文件" ↔ "By File"
  - "按颜色" ↔ "By Color"
  - "按标签" ↔ "By Tag"
  - "按状态" ↔ "By Status"
- ✅ 工具栏按钮：
  - "添加书签" ↔ "Add Bookmark"
  - "刷新" ↔ "Refresh"
  - "导出" ↔ "Export"
  - "导入" ↔ "Import"
  - "导览图" ↔ "Diagram"
  - "English" ↔ "中文"

### 菜单和 Actions
- ✅ Tools 菜单项动态切换
- ✅ 右键菜单项动态切换
- ✅ 所有 Action 按钮悬停提示动态切换

### 对话框和编辑器
- ✅ 导览图编辑器界面
- ✅ 添加/编辑书签对话框
- ✅ 导出/导入对话框
- ✅ 属性编辑面板
