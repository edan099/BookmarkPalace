<idea-plugin>
    <id>com.longlong.bookmark</id>
    <name>BookmarkPalace</name>
    
    <!-- èµ„æºåŒ…ï¼Œç”¨äºå›½é™…åŒ– -->
    <resource-bundle>messages.LongLongBookmarkBundle</resource-bundle>
    <version>1.0.0</version>
    <vendor email="edan_d@qq.com">Edan</vendor>

    <description><![CDATA[
    <p>BookmarkPalace is an enhanced code bookmark system for JetBrains IDEs - making code navigation more efficient and helping you understand code better!</p>
    
    <p><b>ä¹¦ç­¾å®«æ®¿</b> - JetBrains å¢å¼ºä»£ç ä¹¦ç­¾ç³»ç»Ÿï¼Œè®©ä»£ç å¯¼èˆªæ›´é«˜æ•ˆï¼Œå¸®åŠ©ç†è§£ä»£ç ï¼</p>

    <h3>ğŸŒŸ æ ¸å¿ƒäº®ç‚¹ï¼š</h3>
    <ul>
        <li>ğŸ—ºï¸ <b>å¯è§†åŒ–å¯¼è§ˆå›¾</b> - ä¹¦ç­¾èŠ‚ç‚¹å¯åœ¨å›¾ä¸­è‡ªç”±æ”¾ç½®ï¼Œä¸²è”ä»£ç æµç¨‹</li>
        <li>âœ¨ <b>æ™ºèƒ½è¿½è¸ª</b> - åŸºäº RangeMarkerï¼Œä»£ç å˜åŠ¨åä¹¦ç­¾ä½ç½®è‡ªåŠ¨æ›´æ–°</li>
        <li>ğŸ¨ <b>9è‰²æ ‡è®°</b> - è§†è§‰åŒ–åŒºåˆ†ä¸åŒç±»å‹ä¹¦ç­¾</li>
        <li>ğŸŒ <b>ä¸­è‹±åŒè¯­</b> - å®Œæ•´å›½é™…åŒ–æ”¯æŒ</li>
        <li>ğŸ“¤ <b>AIå‹å¥½å¯¼å‡º</b> - JSON/Markdown/Mermaid æ ¼å¼æ”¯æŒ</li>
    </ul>

    <h3>é€‚ç”¨åœºæ™¯ï¼š</h3>
    <ul>
        <li>ä»£ç å®¡æŸ¥æ—¶æ ‡è®°é‡ç‚¹</li>
        <li>å­¦ä¹ æºç æ—¶æ„å»ºé˜…è¯»è·¯çº¿</li>
        <li>å¼€å‘è°ƒè¯•æ—¶è®°å½•å…³é”®ä½ç½®</li>
        <li>ä¸ AI åä½œåˆ†æä»£ç </li>
    </ul>
    
    <p><i>Made with â¤ï¸ by Edan</i></p>
    ]]></description>

    <change-notes><![CDATA[
    <h3>v1.0.0</h3>
    <ul>
        <li>åˆå§‹ç‰ˆæœ¬å‘å¸ƒ</li>
        <li>ä¹¦ç­¾æ ¸å¿ƒåŠŸèƒ½ï¼šæ·»åŠ ã€åˆ é™¤ã€è·³è½¬ã€åŠ¨æ€è·Ÿè¸ª</li>
        <li>æ ‡ç­¾ç³»ç»Ÿï¼šå¤šæ ‡ç­¾ã€é¢œè‰²ã€åˆ†ç»„</li>
        <li>å¯¼è§ˆå›¾ç³»ç»Ÿï¼šMain Flowã€Tag Flowã€Custom Flow</li>
        <li>å¯¼å…¥å¯¼å‡ºï¼šJSONã€Markdownã€Mermaid</li>
    </ul>
    ]]></change-notes>

    <idea-version since-build="232"/>

    <depends>com.intellij.modules.platform</depends>
    <depends>com.intellij.modules.lang</depends>

    <extensions defaultExtensionNs="com.intellij">
        <!-- é¡¹ç›®çº§ä¹¦ç­¾æœåŠ¡ -->
        <projectService
                serviceImplementation="com.longlong.bookmark.service.BookmarkService"/>

        <!-- é¡¹ç›®çº§æ ‡ç­¾æœåŠ¡ -->
        <projectService
                serviceImplementation="com.longlong.bookmark.service.TagService"/>

        <!-- é¡¹ç›®çº§å¯¼è§ˆå›¾æœåŠ¡ -->
        <projectService
                serviceImplementation="com.longlong.bookmark.service.DiagramService"/>

        <!-- ä¹¦ç­¾æŒä¹…åŒ–å­˜å‚¨ -->
        <projectService
                serviceImplementation="com.longlong.bookmark.storage.BookmarkStorage"/>

        <!-- å·¥å…·çª—å£ -->
        <toolWindow
                id="BookmarkPalace"
                anchor="left"
                secondary="true"
                icon="/icons/logo.svg"
                factoryClass="com.longlong.bookmark.ui.BookmarkToolWindowFactory"
                bundle="messages.LongLongBookmarkBundle"
                key="tool.window.name"/>

        <!-- Gutter Icon æä¾›è€… -->
        <codeInsight.lineMarkerProvider
                language=""
                implementationClass="com.longlong.bookmark.editor.BookmarkLineMarkerProvider"/>

        <!-- ç¼–è¾‘å™¨ç›‘å¬å™¨ -->
        <editorFactoryListener
                implementation="com.longlong.bookmark.editor.BookmarkEditorListener"/>

        <!-- æ–‡ä»¶ç›‘å¬å™¨ -->
        <projectService
                serviceImplementation="com.longlong.bookmark.service.FileChangeListener"/>

        <!-- é€šçŸ¥ç»„ -->
        <notificationGroup
                id="BookmarkPalace"
                displayType="BALLOON"/>
        
        <!-- å¯¼è§ˆå›¾æ–‡ä»¶ç¼–è¾‘å™¨ -->
        <fileEditorProvider
                implementation="com.longlong.bookmark.ui.diagram.DiagramFileEditorProvider"/>
        
        <!-- å¯¼è§ˆå›¾æ–‡ä»¶ç±»å‹ï¼ˆç¼–è¾‘æ¨¡å¼ï¼‰ -->
        <fileType
                name="LongLong Diagram"
                implementationClass="com.longlong.bookmark.ui.diagram.DiagramFileType"
                extensions="lldiagram"/>
        
        <!-- å¯¼è§ˆå›¾æ–‡ä»¶ç±»å‹ï¼ˆæŸ¥çœ‹æ¨¡å¼ï¼‰ -->
        <fileType
                name="LongLong Diagram View"
                implementationClass="com.longlong.bookmark.ui.diagram.DiagramViewFileType"
                extensions="lldiagramview"/>
        
        <!-- å¯¼è§ˆå›¾ç¼–è¾‘å™¨è®¾ç½®ï¼ˆåº”ç”¨çº§ï¼‰ -->
        <applicationService
                serviceImplementation="com.longlong.bookmark.settings.DiagramEditorSettings"/>
        
        <!-- å¯¼è§ˆå›¾æ ‡ç­¾é¡µæ ‡é¢˜æä¾›è€… -->
        <editorTabTitleProvider
                implementation="com.longlong.bookmark.ui.diagram.DiagramTabTitleProvider"/>
        
        <!-- Alt+Enter æ„å›¾åŠ¨ä½œï¼šæ·»åŠ ä¹¦ç­¾ï¼ˆå¸¦å¯¹è¯æ¡†ï¼‰ -->
        <intentionAction>
            <className>com.longlong.bookmark.action.AddBookmarkIntention</className>
            <category>BookmarkPalace</category>
        </intentionAction>
        
        <!-- Alt+Enter æ„å›¾åŠ¨ä½œï¼šå¿«é€Ÿæ·»åŠ ä¹¦ç­¾ -->
        <intentionAction>
            <className>com.longlong.bookmark.action.QuickAddBookmarkIntention</className>
            <category>BookmarkPalace</category>
        </intentionAction>
    </extensions>

    <actions>
        <!-- ä¸»èœå•ç»„ -->
        <group id="BookmarkPalace.MainMenu"
               class="com.longlong.bookmark.action.BookmarkPalaceMenuGroup"
               icon="/icons/logo.svg"
               popup="true">
            <add-to-group group-id="ToolsMenu" anchor="last"/>
        </group>

        <!-- æ·»åŠ ä¹¦ç­¾ -->
        <action id="BookmarkPalace.AddBookmark"
                class="com.longlong.bookmark.action.AddBookmarkAction"
                text="æ·»åŠ ä¹¦ç­¾"
                description="æ·»åŠ ä»£ç ä¹¦ç­¾"
                icon="/icons/add_bookmark.svg">
            <add-to-group group-id="BookmarkPalace.MainMenu" anchor="first"/>
            <add-to-group group-id="EditorPopupMenu" anchor="first"/>
            <keyboard-shortcut keymap="$default" first-keystroke="ctrl shift B"/>
        </action>

        <!-- å¿«é€Ÿæ·»åŠ ä¹¦ç­¾ï¼ˆæ— å¯¹è¯æ¡†ï¼‰ -->
        <action id="BookmarkPalace.QuickAddBookmark"
                class="com.longlong.bookmark.action.QuickAddBookmarkAction"
                text="å¿«é€Ÿæ·»åŠ ä¹¦ç­¾"
                description="å¿«é€Ÿæ·»åŠ /åˆ é™¤ä¹¦ç­¾ï¼ˆæ— å¯¹è¯æ¡†ï¼‰"
                icon="/icons/quick_add.svg">
            <add-to-group group-id="BookmarkPalace.MainMenu" anchor="after"
                          relative-to-action="BookmarkPalace.AddBookmark"/>
            <keyboard-shortcut keymap="$default" first-keystroke="ctrl alt B"/>
        </action>

        <!-- æ˜¾ç¤ºä¹¦ç­¾åˆ—è¡¨ -->
        <action id="BookmarkPalace.ShowBookmarks"
                class="com.longlong.bookmark.action.ShowBookmarksAction"
                text="æ˜¾ç¤ºä¹¦ç­¾åˆ—è¡¨"
                description="æ‰“å¼€ä¹¦ç­¾å®«æ®¿å·¥å…·çª—å£"
                icon="/icons/bookmark_list.svg">
            <add-to-group group-id="BookmarkPalace.MainMenu" anchor="after"
                          relative-to-action="BookmarkPalace.QuickAddBookmark"/>
            <keyboard-shortcut keymap="$default" first-keystroke="ctrl shift M"/>
        </action>

        <!-- æ‰“å¼€å¯¼è§ˆå›¾ -->
        <action id="BookmarkPalace.OpenDiagram"
                class="com.longlong.bookmark.action.OpenDiagramAction"
                text="æ‰“å¼€å¯¼è§ˆå›¾"
                description="æ‰“å¼€æˆ–åˆ›å»ºå¯¼è§ˆå›¾"
                icon="/icons/diagram.svg">
            <add-to-group group-id="BookmarkPalace.MainMenu" anchor="after"
                          relative-to-action="BookmarkPalace.ShowBookmarks"/>
        </action>

        <!-- å¯¼å‡º -->
        <action id="BookmarkPalace.Export"
                class="com.longlong.bookmark.action.ExportAction"
                text="å¯¼å‡ºä¹¦ç­¾"
                description="å¯¼å‡ºä¹¦ç­¾ä¸º JSON/Markdown/Mermaid æ ¼å¼"
                icon="/icons/export.svg">
            <add-to-group group-id="BookmarkPalace.MainMenu" anchor="after"
                          relative-to-action="BookmarkPalace.OpenDiagram"/>
        </action>

        <!-- å¯¼å…¥ -->
        <action id="BookmarkPalace.Import"
                class="com.longlong.bookmark.action.ImportAction"
                text="å¯¼å…¥ä¹¦ç­¾"
                description="ä»æ–‡ä»¶å¯¼å…¥ä¹¦ç­¾"
                icon="/icons/import.svg">
            <add-to-group group-id="BookmarkPalace.MainMenu" anchor="after"
                          relative-to-action="BookmarkPalace.Export"/>
        </action>

        <!-- ä» IDE ä¹¦ç­¾å¯¼å…¥ -->
        <action id="BookmarkPalace.ImportFromIde"
                class="com.longlong.bookmark.action.ImportFromIdeAction"
                text="ä» IDE ä¹¦ç­¾å¯¼å…¥"
                description="ä» IntelliJ è‡ªå¸¦ä¹¦ç­¾å¯¼å…¥åˆ°ä¹¦ç­¾å®«æ®¿"
                icon="/icons/import.svg">
            <add-to-group group-id="BookmarkPalace.MainMenu" anchor="after"
                          relative-to-action="BookmarkPalace.Import"/>
        </action>

        <!-- è¯Šæ–­å¯¼è§ˆå›¾ç¼–è¾‘å™¨ -->
        <action id="BookmarkPalace.DiagnoseDiagramEditor"
                class="com.longlong.bookmark.action.DiagnoseDiagramEditorAction"
                text="è¯Šæ–­å¯¼è§ˆå›¾ç¼–è¾‘å™¨"
                description="æ£€æŸ¥ Draw.io ç¼–è¾‘å™¨é…ç½®å’Œ jCEF æ”¯æŒçŠ¶æ€">
            <add-to-group group-id="BookmarkPalace.MainMenu" anchor="after"
                          relative-to-action="BookmarkPalace.Import"/>
        </action>

        <!-- æ‰“èµä¸è”ç³» -->
        <action id="BookmarkPalace.Donate"
                class="com.longlong.bookmark.action.DonateAction"
                text="â˜• æ‰“èµä¸è”ç³» | Donate &amp; Contact"
                description="è¯·ä½œè€…å–æ¯å’–å•¡ï¼ŒæŸ¥çœ‹è”ç³»æ–¹å¼"
                icon="/icons/donate.svg">
            <add-to-group group-id="BookmarkPalace.MainMenu" anchor="last"/>
        </action>
    </actions>

    <projectListeners>
        <listener
                class="com.longlong.bookmark.service.ProjectOpenListener"
                topic="com.intellij.openapi.project.ProjectManagerListener"/>
    </projectListeners>
</idea-plugin>
